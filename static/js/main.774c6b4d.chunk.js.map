{"version":3,"sources":["components/Cart.jsx","components/Header.jsx","models/cart.js","components/Content.jsx","App.js","api/index.js","models/products.js","index.js"],"names":["connect","cart","data","dispatch","useState","visible","setVisible","check","setCheck","total","reduce","item","product","price","quantity","toFixed","useEffect","window","localStorage","type","className","onClick","ShoppingCartOutlined","length","title","placement","closable","onClose","width","footer","style","height","position","message","warn","disabled","headerStyle","textAlign","backgroundColor","bodyStyle","footerStyle","color","itemLayout","dataSource","renderItem","index","Item","src","sku","size","description","payload","id","key","SubMenu","Menu","products","staticData","shopData","sortGoods","a","bol","sortBySize","fontWeight","theme","mode","fontSize","map","icon","ProjectOutlined","namespace","state","effects","addCart","put","setStorage","cdata","_data","JSON","parse","settlementData","decreaseNum","increaseNum","removeCart","reducers","saveItem","newData","finded","find","product_id","storage","stringify","setItem","removeGood","installments","splice","console","log","increment","findIndex","error","storageData","settlement","checkout","cutOne","Meta","Card","cartData","load","setLoad","page","shopList","xs","sm","md","lg","marginTop","hoverable","cover","alt","isFreeShipping","toString","split","content","availableSizes","success","block","trigger","IndexPage","justify","margin","Content","getProducts","Promise","resolve","setTimeout","fetch","call","api","res","sortDatas","forEach","i","push","sort","b","saveData","saveShopdata","addOne","setData","app","dva","history","createHistory","router","model","start"],"mappings":"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","file":"static/js/main.774c6b4d.chunk.js","sourcesContent":["import React, { useState,useEffect } from \"react\";\r\nimport { Drawer, List, Image, message } from \"antd\";\r\nimport { ShoppingCartOutlined } from \"@ant-design/icons\";\r\nimport \"../App.css\";\r\nimport 'antd/dist/antd.css';\r\n\r\nimport { connect } from \"dva\";\r\n\r\nconst Cart = ({ cart, dispatch }) => {\r\n  const [visible, setVisible] = useState(false);\r\n  const [check, setCheck] = useState(true)\r\n  const showDrawer = () => {\r\n    setVisible(true);\r\n  };\r\n  const onClose = () => {\r\n    setVisible(false);\r\n  };\r\n\r\n  const total = cart\r\n    .reduce((total, item) => total + item.product.price * item.quantity, 0)\r\n    .toFixed(2);\r\n\r\n    useEffect(()=> {\r\n      if(window.localStorage.data){\r\n        dispatch({type:\"cart/setStorage\"})\r\n      }\r\n    },[])\r\n  return (\r\n    <>\r\n      <button className=\"cartBtn\" onClick={showDrawer}>\r\n        <ShoppingCartOutlined /><span className=\"showCount\">{cart.length}</span>\r\n      </button>\r\n      <div className=\"cartDiv\">\r\n        <Drawer\r\n          title={\r\n            <div>\r\n              <div className={visible ? \"countCart\" : \"\"}>\r\n                {cart.length}\r\n              </div>\r\n              <span className=\"titleCart\">\r\n                <ShoppingCartOutlined />\r\n                Cart\r\n              </span>\r\n            </div>\r\n          }\r\n          placement=\"right\"\r\n          closable={false}\r\n          onClose={onClose}\r\n          visible={visible}\r\n          width={\"35%\"}\r\n          footer={\r\n            <div style={{ height: \"100px\", position: \"relative\" }}>\r\n              <span className=\"totalTitle\">Total: </span>\r\n              <span className=\"totalNum\">$ {total}</span>\r\n              <br />\r\n              <button\r\n                onClick={() => {\r\n                  if(check){\r\n                    message.warn(`合计${total},再次点击即可结算`)\r\n                    setCheck(false)\r\n                    return\r\n                  }else {\r\n                    dispatch({\r\n                      type: \"cart/checkout\",\r\n                    })\r\n                    setCheck(true)\r\n                  }\r\n                   \r\n                }\r\n                  \r\n                }\r\n                disabled={cart.length === 0}\r\n                className=\"checkBtn\"\r\n              >\r\n                Check Out\r\n              </button>\r\n            </div>\r\n          }\r\n          headerStyle={{ textAlign: \"center\", backgroundColor: \"#1b1a20\" }}\r\n          bodyStyle={{ backgroundColor: \"#1b1a20\" }}\r\n          footerStyle={{ backgroundColor: \"#1b1a20\", color: \"#fff\" }}\r\n        >\r\n          {cart.length === 0 ? (\r\n            <h1 style={{ color: \"#fff\" }}>Your Shopping-Cart is empty!</h1>\r\n          ) : (\r\n            <div>\r\n              <List\r\n                itemLayout=\"horizontal\"\r\n                dataSource={cart}\r\n                renderItem={(item, index) => (\r\n                  <List.Item key={item.sku}>\r\n                    <Image\r\n                      src={`./img/${item.product.sku}_1.jpg`}\r\n                      className=\"cartImg\"\r\n                    />\r\n                    <div className=\"detail\">\r\n                      {item.product.title}\r\n                      <br />\r\n                      <span>\r\n                        {item.size} | {item.product.description}\r\n                      </span>\r\n                      <br />\r\n                      <span>quantity: {item.quantity}</span>\r\n                    </div>\r\n                    <div>\r\n                      <button\r\n                        className=\"btnDel\"\r\n                        onClick={() => {\r\n                          dispatch({\r\n                            type: \"cart/removeCart\",\r\n                            payload: {\r\n                              index: index,\r\n                              quantity:item.quantity\r\n                            },\r\n                          });\r\n                        }}\r\n                      >\r\n                        X\r\n                      </button>\r\n                      <p className=\"goodsPrice\">${item.product.price}</p>\r\n                      <p>\r\n                        <button\r\n                          className=\"btnDecrement\"\r\n                          onClick={() => {\r\n                            dispatch({\r\n                              type: \"cart/decreaseNum\",\r\n                              payload: {\r\n                                id: item.id,\r\n                                size: item.size,\r\n                                key: -1,\r\n                              },\r\n                            });\r\n                          }}\r\n                        >\r\n                          -\r\n                        </button>\r\n                        <button\r\n                          className=\"btnIncrement\"\r\n                          onClick={() => {\r\n                            dispatch({\r\n                              type: \"cart/increaseNum\",\r\n                              payload: {\r\n                                id: item.id,\r\n                                size: item.size,\r\n                                key: 1,\r\n                              },\r\n                            });\r\n                          }}\r\n                        >\r\n                          +\r\n                        </button>\r\n                      </p>\r\n                    </div>\r\n                  </List.Item>\r\n                )}\r\n              />\r\n            </div>\r\n          )}\r\n        </Drawer>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ cart }) => ({\r\n  cart: cart.data,\r\n});\r\nexport default connect(mapStateToProps)(Cart);\r\n","import React from \"react\";\r\nimport { connect } from \"dva\";\r\nimport { Menu } from \"antd\";\r\nimport { ProjectOutlined } from \"@ant-design/icons\";\r\nimport  \"../App.css\";\r\n\r\n\r\nconst { SubMenu } = Menu;\r\n\r\nconst Header = ({ dispatch, products,staticData }) => {\r\n  const sizeList = ['S','M','L','XL','XXL']\r\n  const sortGoods = async (key) => {\r\n    await dispatch({\r\n      type: \"products/sortDatas\",\r\n      payload: {\r\n        product: products,\r\n        key,\r\n        bol:false\r\n      },\r\n    });\r\n  };\r\n  const sortBySize = async(key) => {\r\n    await dispatch({\r\n      type: \"products/sortDatas\",\r\n      payload: {\r\n        product: staticData,\r\n        key,\r\n        bol:true\r\n      },\r\n    })\r\n  }\r\n  return (\r\n    <div className=\"header\">\r\n      <span className=\"headerLeft\">\r\n        <span style={{color:\"red\",fontWeight:\"500\"}}>{products.length}</span> Products found\r\n        </span>\r\n\r\n      <span className=\"headerRight\">\r\n        <Menu theme=\"light\" mode=\"horizontal\">\r\n          <SubMenu \r\n            title=\"Specified Size\"\r\n            style={{ color: \"#000\", fontSize: \"18px\" }}\r\n          >\r\n            {sizeList.map((item) => (<Menu.Item key={item + '*'} onClick={() => sortBySize(`${item}`)} >{item}</Menu.Item>))}\r\n          </SubMenu>\r\n          <SubMenu\r\n            icon={<ProjectOutlined />}\r\n            style={{ color: \"#000\", fontSize: \"18px\" }}\r\n            title=\"Order by\"\r\n          >\r\n            <Menu.Item key=\"setting:1\" onClick={() => sortGoods(\"\")}>\r\n              默认\r\n            </Menu.Item>\r\n            <Menu.Item key=\"setting:2\" onClick={() => sortGoods(\"asc\")}>\r\n              价格升序\r\n            </Menu.Item>\r\n            <Menu.Item key=\"setting:3\" onClick={() => sortGoods(\"desc\")}>\r\n              价格降序\r\n            </Menu.Item>\r\n          </SubMenu>\r\n        </Menu>\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ products }) => ({\r\n  products: products.data,\r\n  staticData: products.shopData\r\n});\r\n\r\nexport default connect(mapStateToProps)(Header);\r\n","import { message } from \"antd\";\r\nexport default {\r\n  namespace: \"cart\",\r\n  state: {\r\n    data: [],\r\n  },\r\n  effects: {\r\n    *addCart({ payload }, { put }) {\r\n      yield put({ type: \"products/addCart\", payload });\r\n      yield put({ type: \"saveItem\", payload });\r\n    },\r\n    *setStorage({payload},{put }){\r\n      yield put ({\r\n        type:\"storageData\",\r\n        cdata:{\r\n          _data: JSON.parse(window.localStorage.data)\r\n        }\r\n      })\r\n    },\r\n    *settlementData({payload},{put}){\r\n      yield put({type:\"settlement\"})\r\n    },\r\n    *decreaseNum({ payload },{put}) {\r\n      yield put({\r\n        type:'cutOne',\r\n        payload\r\n      })\r\n      yield put({\r\n        type:'products/addOne',\r\n        payload\r\n      })\r\n    },*increaseNum({payload}, {put}){\r\n      yield put ({\r\n        type:\"increment\",\r\n        payload\r\n      })\r\n    },*removeCart({payload}, {put}){\r\n      yield put ({\r\n        type:\"removeGood\",\r\n        payload\r\n      })\r\n    }\r\n  },\r\n  reducers: {\r\n    saveItem(state, { payload }) {\r\n      const {data} = state\r\n      let newData = [];\r\n      const finded = data.find(\r\n        (item) =>\r\n          item.product_id === payload.product_id && item.size === payload.size\r\n      );\r\n      if (finded) {\r\n        finded.quantity += payload.quantity;\r\n        newData = data.map((item) =>\r\n          item.product_id === finded.product_id && item.size === finded.size\r\n            ? finded\r\n            : item\r\n        );\r\n      } else {\r\n        newData = [...data, payload];\r\n      }\r\n      \r\n      const storage = window.localStorage\r\n      let _data = JSON.stringify(data)\r\n      storage.setItem(\"data\",_data)\r\n      return {\r\n        data: newData,\r\n      };\r\n    },\r\n    removeGood(state, { payload }) {\r\n      const {data} = state\r\n      data[payload.index].product.installments += payload.quantity\r\n      data.splice(payload.index, 1);\r\n      console.log(data);\r\n      \r\n      \r\n      const storage = window.localStorage\r\n      let _data = JSON.stringify(data)\r\n      storage.setItem(\"data\",_data)\r\n      return { \r\n        ...state,\r\n        data: [...data] };\r\n    },\r\n    increment(state, { payload }) {\r\n      const { data } = state;\r\n      const index = data.findIndex(\r\n        (item) => item.id === payload.id && item.size === payload.size\r\n      );\r\n      if (data[index].product.installments === 0) {\r\n        message.error(\"库存不足\");\r\n      } else {\r\n        data[index].quantity += payload.key;\r\n        data[index].product.installments -= payload.key;\r\n      }\r\n      const storage = window.localStorage\r\n      let _data = JSON.stringify(data)\r\n      storage.setItem(\"data\",_data)\r\n\r\n      return { data: [...data] };\r\n    },\r\n    \r\n    storageData(state,{cdata}){\r\n      return {\r\n        data:cdata._data\r\n      }\r\n    },\r\n    settlement(state,{data}){\r\n      const storage = window.localStorage\r\n      let _data = JSON.stringify(data)\r\n      storage.setItem(\"data\",_data)\r\n\r\n      return{\r\n        ...state,\r\n        data:data._data\r\n      }\r\n    },\r\n    checkout(state) {\r\n      const {data} = state\r\n      data.splice(0,data.length)\r\n      const storage = window.localStorage\r\n      let _data = JSON.stringify(data)\r\n      storage.setItem(\"data\",_data)\r\n      return {\r\n        data: [...data],\r\n      };\r\n    },\r\n    cutOne(state,{payload}){\r\n      const { data } = state;\r\n      const index = data.findIndex(\r\n        (item) => item.id === payload.id && item.size === payload.size\r\n      );\r\n      if (data[index].quantity === 1) {\r\n        message.error(\"库存只有一件啦，不能再减了\");\r\n      } else {\r\n        data[index].quantity += payload.key;\r\n        data[index].product.installments -= payload.key;\r\n        console.log(data[index].product.installments);\r\n      }\r\n      const storage = window.localStorage\r\n      let _data = JSON.stringify(data)\r\n      storage.setItem(\"data\",_data)\r\n\r\n      return { data: [...data] };\r\n    }\r\n  },\r\n};\r\n","import React, { useEffect, Fragment,useState } from \"react\";\r\nimport { Card, Popover, Button, Col, List, message, Spin, Space } from \"antd\";\r\nimport Header from \"./Header\";\r\nimport \"../App.css\";\r\nimport { connect } from \"dva\";\r\nimport {SyncOutlined} from \"@ant-design/icons\"\r\nimport cart from \"../models/cart\";\r\n\r\n\r\nconst { Meta } = Card;\r\n\r\nconst Products = ({ dispatch, products,cartData }) => {\r\n\r\n  const [load,setLoad] = useState(0)\r\n  useEffect(()=>{\r\n    dispatch({\r\n      type: \"products/fetch\",\r\n      payload:{}\r\n    });\r\n  },[cartData])\r\n\r\n  useEffect(async()=> {\r\n    await setLoad(1)\r\n    await dispatch({\r\n      type: \"products/fetch\",\r\n      payload: {page:1},\r\n    })\r\n    console.log('dispatchs');\r\n    if(window.localStorage.data){\r\n      dispatch({type:\"cart/setStorage\"})\r\n    }\r\n    await setLoad(0)\r\n\r\n  },[])\r\n\r\n  const shopList = (products || []).map((item,index) => {\r\n    return (\r\n      <Col\r\n        xs={20}\r\n        sm={10}\r\n        md={7}\r\n        lg={5}\r\n        key={index}\r\n        style={{ marginTop: \"15px\" }}\r\n      >\r\n        <Card\r\n          hoverable\r\n          cover={<img alt=\"ex\" src={`./img/${item.sku}_1.jpg`} />}\r\n          style={{ textAlign: \"center\" }}\r\n        >\r\n          {item.isFreeShipping?<div style={{position:'relative'}}>\r\n            <span className=\"freeShip\">Free Shipping</span>\r\n          </div>:''}\r\n          <Meta title={item.title} />\r\n          <span className=\"contentLine\">————</span>\r\n          <br />\r\n          <span className=\"price\">$</span>\r\n          <span className=\"priceInt\">\r\n            {item.price - (item.price % 1)}\r\n          </span>\r\n          <span className=\"priceFloat\">\r\n            {item.price % 1 === 0\r\n              ? \"\"\r\n              : \".\" + item.price.toString().split(\".\")[1]}\r\n          </span>\r\n          <br />\r\n         \r\n          <Popover\r\n            content={\r\n              <List\r\n                size=\"small\"\r\n                dataSource={item.availableSizes}\r\n                renderItem={(size) => (\r\n                  <List.Item>\r\n                    <Button\r\n                      disabled={item.installments===0}\r\n                      onClick={() => {\r\n                        dispatch({\r\n                          type: \"cart/addCart\",\r\n                          payload: {\r\n                            product_id: item.id,\r\n                            quantity: item.installments > 0 ? 1 : 0,\r\n                            product: item,\r\n                            size: size,\r\n                          },\r\n                        });\r\n                        item.installments === 0\r\n                          ? message.error(\"库存不足\")\r\n                          : message.success(\"添加成功\");\r\n                      }}\r\n                      block\r\n                    >\r\n                      {size}\r\n                      {console.log(item.installments,'库存')}\r\n                    </Button>   \r\n                  </List.Item>\r\n                )}\r\n              />\r\n            }\r\n            title=\"选择你的尺码\"\r\n            trigger=\"click\"\r\n          >\r\n            <button\r\n              disabled={item.installments === 0}\r\n              className=\"contentBtn\"\r\n            >\r\n              Add to Car\r\n            </button>\r\n          </Popover>\r\n        </Card>\r\n      </Col>\r\n    )\r\n  })\r\n  \r\n\r\n  return (\r\n    <Fragment>\r\n      <Header />\r\n     {\r\n      load ? \r\n      (  <div className='loading'>\r\n          <Spin size=\"large\" />\r\n         </div>) : shopList  \r\n    } \r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ products,cart }) => ({\r\n  products: products.data,\r\n  cartData: cart.data\r\n});\r\n\r\nexport default connect(mapStateToProps)(Products);\r\n","import React from \"react\";\nimport { Row } from \"antd\";\nimport 'antd/dist/antd.css';\nimport Cart from \"./components/Cart\";\nimport Contents from \"./components/Content\";\n\n\n\nfunction IndexPage() {\n  return (\n    <>\n      <Cart />\n      <Row type=\"flex\" justify=\"space-around\" style={{ margin: \"90px 45px 0\" }}>\n        <Contents />\n      </Row>\n    </>\n  );\n}\n\nexport default IndexPage;\n","import products from \"./shopdata.json\";\r\n// import axios from 'axios'\r\n\r\nexport const getProducts = () => {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => resolve(products), 1000);\r\n  });\r\n};\r\n\r\n// export const getProducts = () => {\r\n//   axios.get(products).then(res=> console.log(res,'getshopping'))\r\n// }\r\n ","import * as api from \"../api/index\";\r\nimport {message} from 'antd'\r\n\r\nexport default {\r\n  namespace: \"products\",\r\n  state: {\r\n    data: [],\r\n    shopData:[]\r\n  },\r\n  effects: {\r\n    *fetch({ payload }, { call, put }) {\r\n      const res = yield call(api.getProducts);\r\n      console.log(res);\r\n      if(res){\r\n        yield put({ type: \"saveData\", payload: {res} });\r\n        yield put({ type: \"saveShopdata\", payload: {res} });\r\n      }else{\r\n        message.error(\"未找到数据\")\r\n      }\r\n      \r\n\r\n    },\r\n    *sortDatas({ payload: { product, key,bol } }, { put }) {\r\n      let newData = [];\r\n      if(bol){\r\n        if(key) {\r\n          product.forEach(item => {\r\n            for(let i = 0;i < item.availableSizes.length;i++){\r\n              if(item.availableSizes[i] === key){\r\n                newData.push(item)\r\n              }\r\n            }\r\n          })\r\n        }\r\n      }else{\r\n        if (key === \"asc\") {\r\n          newData = product.sort((a, b) => a[\"price\"] - b[\"price\"]);\r\n        } else if (key === \"desc\") {\r\n          newData = product.sort((a, b) => b[\"price\"] - a[\"price\"]);\r\n        }\r\n        else {    \r\n          newData = product.sort((a, b) => a[\"id\"] - b[\"id\"]);\r\n        }\r\n      }\r\n      \r\n      yield put({\r\n        type: \"setData\",\r\n        data: [...newData],\r\n      });\r\n    },\r\n  },\r\n  reducers: {\r\n    saveData(state, payload ) {\r\n      console.log(payload,'12323');\r\n      \r\n      const {res} = payload.payload\r\n      return {\r\n        ...state,\r\n        data: res,\r\n      };\r\n    },\r\n    saveShopdata(state, payload ) {\r\n      const {res} = payload.payload\r\n      return {\r\n        ...state,\r\n        shopData: res,\r\n      };\r\n    },\r\n    addOne(state,{payload}){\r\n      const {data} = state\r\n      const newData = JSON.parse(JSON.stringify(data))\r\n      newData.map((item)=>{\r\n        if(item.id = payload.product_id){\r\n          ++item.installments\r\n        }\r\n      })\r\n      return {\r\n        data:newData\r\n      }\r\n    },\r\n    addCart(state, { payload }) {\r\n      const newData = state.data.map((item) => {\r\n        if (item.id === payload.product_id && item.installments > 0) {\r\n          item.installments--;\r\n          return item;\r\n        }\r\n        return item;\r\n      });\r\n      return {\r\n        data: newData,\r\n      };\r\n    },\r\n    setData(state, payload) {\r\n      return {\r\n        ...state,\r\n        data: [...payload.data],\r\n      };\r\n    },\r\n  },\r\n};\r\n","import dva from 'dva'\nimport App from './App';\nimport cart from './models/cart'\nimport products from './models/products'\nimport { createBrowserHistory as createHistory } from 'history'\n\nconst app = dva({\n    history: createHistory()\n});\napp.router(() => <App />);\napp.model(products);\napp.model(cart);\napp.start(\"#root\");"],"sourceRoot":""}
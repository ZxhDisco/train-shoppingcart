(this.webpackJsonpshopc=this.webpackJsonpshopc||[]).push([[0],{151:function(t,e,a){},298:function(t,e){},421:function(t){t.exports=JSON.parse("{}")},439:function(t,e,a){"use strict";a.r(e);var n=a(7),r=a(60),c=a.n(r),s=a(0),i=(a(198),a(15)),o=a.n(i),d=a(72),u=a(447),l=a(90),p=a(50),j=a(452),b=(a(151),u.a.SubMenu),f=Object(r.connect)((function(t){var e=t.products;return{products:e.data,staticData:e.shopData}}))((function(t){var e=t.dispatch,a=t.products,r=t.staticData,c=function(){var t=Object(d.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({type:"products/sortDatas",payload:{product:a,key:n,bol:!1}});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(d.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({type:"products/sortDatas",payload:{product:r,key:a,bol:!0}});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsxs)(l.a,{type:"flex",className:"header",children:[Object(n.jsxs)(p.a,{xs:22,sm:6,md:8,lg:15,className:"headerLeft",children:[Object(n.jsx)("span",{style:{color:"red",fontWeight:"500"},children:a.length})," Products found"]}),Object(n.jsx)(p.a,{xs:22,sm:10,md:10,lg:8,className:"headerRight",children:Object(n.jsxs)(u.a,{theme:"light",mode:"horizontal",children:[Object(n.jsxs)(b,{title:"Specified Size",style:{color:"#000",fontSize:"18px"},children:[Object(n.jsx)(u.a.Item,{onClick:function(){return c("")},children:"ALL"},"setting:4"),["S","M","L","XL","XXL"].map((function(t){return Object(n.jsx)(u.a.Item,{onClick:function(){return s("".concat(t))},children:t},t+"*")}))]}),Object(n.jsxs)(b,{icon:Object(n.jsx)(j.a,{}),style:{color:"#000",fontSize:"18px"},title:"Order by",children:[Object(n.jsx)(u.a.Item,{onClick:function(){return c("default")},children:"\u9ed8\u8ba4"},"setting:1"),Object(n.jsx)(u.a.Item,{onClick:function(){return c("asc")},children:"\u4ef7\u683c\u5347\u5e8f"},"setting:2"),Object(n.jsx)(u.a.Item,{onClick:function(){return c("desc")},children:"\u4ef7\u683c\u964d\u5e8f"},"setting:3")]})]})})]})})),x=a(89),h=a(450),O=a(449),m=a(445),y=a(446),v=a(453),g=Object(r.connect)((function(t){return{cart:t.cart.data}}))((function(t){var e=t.cart,a=t.dispatch,r=Object(s.useState)(!1),c=Object(x.a)(r,2),i=c[0],o=c[1],d=Object(s.useState)(!0),u=Object(x.a)(d,2),j=u[0],b=u[1],f=Object(s.useState)(1e3),g=Object(x.a)(f,2),k=g[0],w=g[1],S=e.reduce((function(t,e){return t+e.product.price*e.quantity}),0).toFixed(2);return Object(s.useEffect)((function(){window.addEventListener("resize",(function(){w(document.documentElement.clientWidth)}))}),[document.documentElement.clientWidth]),Object(s.useEffect)((function(){window.localStorage.data&&a({type:"cart/setStorage"})}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("button",{className:"cartBtn",onClick:function(){o(!0)},children:[Object(n.jsx)(v.a,{}),Object(n.jsx)("span",{className:"showCount",children:e.length})]}),Object(n.jsx)("div",{children:Object(n.jsx)(h.a,{title:Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"iconCart",children:[Object(n.jsx)(v.a,{}),Object(n.jsx)("div",{className:i?"countCart":"",children:e.length})]}),Object(n.jsx)("div",{className:"titleCart",children:"Cart"})]}),placement:"right",closable:!1,onClose:function(){o(!1)},visible:i,width:k>850?"35%":"75%",footer:Object(n.jsxs)("div",{style:{height:"100px",position:"relative"},children:[Object(n.jsx)("span",{className:"totalTitle",children:"Total: "}),Object(n.jsxs)("span",{className:"totalNum",children:["$ ",S]}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{onClick:function(){if(j)return O.b.warn("\u5408\u8ba1".concat(S,",\u518d\u6b21\u70b9\u51fb\u5373\u53ef\u7ed3\u7b97")),void b(!1);a({type:"cart/checkout"}),b(!0)},disabled:0===e.length,className:"checkBtn",children:"Check Out"})]}),headerStyle:{textAlign:"center",backgroundColor:"#1b1a20"},bodyStyle:{backgroundColor:"#1b1a20"},footerStyle:{backgroundColor:"#1b1a20",color:"#fff"},children:0===e.length?Object(n.jsx)("h1",{style:{color:"#fff"},children:"Your Shopping-Cart is empty!"}):Object(n.jsx)(l.a,{children:Object(n.jsx)(m.b,{itemLayout:"horizontal",dataSource:e,renderItem:function(t,e){return Object(n.jsxs)(m.b.Item,{children:[Object(n.jsx)(p.a,{xs:5,children:Object(n.jsx)(y.a,{src:"./img/".concat(t.product.sku,"_1.jpg")})}),Object(n.jsxs)(p.a,{xs:12,className:"detail",children:[t.product.title,Object(n.jsx)("br",{}),Object(n.jsxs)("span",{children:[t.size," | ",t.product.description]}),Object(n.jsx)("br",{}),Object(n.jsxs)("span",{children:["quantity: ",t.quantity]})]}),Object(n.jsxs)(p.a,{xs:5,children:[Object(n.jsx)("button",{className:"btnDel",onClick:function(){a({type:"cart/removeCart",payload:{index:e,quantity:t.quantity}})},children:"X"}),Object(n.jsxs)("p",{className:"goodsPrice",children:["$",t.product.price]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("button",{className:"btnDecrement",onClick:function(){a({type:"cart/decreaseNum",payload:{id:t.id,size:t.size,key:-1}})},children:"-"}),Object(n.jsx)("button",{className:"btnIncrement",onClick:function(){a({type:"cart/increaseNum",payload:{id:t.id,size:t.size,key:1}})},children:"+"})]})]})]},t.sku)}})})})})]})})),k=a(444),w=a(451),S=a(448),N=a(235),C=k.a.Meta,z=Object(r.connect)((function(t){var e=t.products,a=t.cart;return{products:e.data,cartData:a.data}}))((function(t){var e=t.dispatch,a=t.products,r=t.cartData,c=Object(s.useState)(0),i=Object(x.a)(c,2),u=i[0],j=i[1];Object(s.useEffect)((function(){e({type:"products/fetch",payload:{}})}),[r]),Object(s.useEffect)(Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(1);case 2:return t.next=4,e({type:"products/fetch",payload:{page:1}});case 4:return window.localStorage.data&&e({type:"cart/setStorage"}),t.next=7,j(0);case 7:case"end":return t.stop()}}),t)}))),[]);var b=(a||[]).map((function(t,a){return Object(n.jsx)(p.a,{xs:20,sm:10,md:7,lg:5,style:{marginTop:"15px"},children:Object(n.jsxs)(k.a,{hoverable:!0,cover:Object(n.jsx)("img",{alt:"ex",src:"./img/".concat(t.sku,"_1.jpg")}),style:{textAlign:"center",position:"relative"},children:[t.isFreeShipping?Object(n.jsx)("span",{className:"freeShip",children:"Free Shipping"}):"",Object(n.jsx)(C,{title:t.title}),Object(n.jsx)("span",{className:"contentLine",children:"\u2014\u2014\u2014\u2014"}),Object(n.jsx)("br",{}),Object(n.jsx)("span",{className:"price",children:"$"}),Object(n.jsx)("span",{className:"priceInt",children:t.price-t.price%1}),Object(n.jsx)("span",{className:"priceFloat",children:t.price%1===0?".00":"."+t.price.toFixed(2).toString().split(".")[1]}),Object(n.jsx)("br",{}),Object(n.jsx)(w.a,{content:Object(n.jsx)(m.b,{size:"small",dataSource:t.availableSizes,renderItem:function(a){return Object(n.jsx)(m.b.Item,{children:Object(n.jsx)(S.a,{disabled:0===t.installments,onClick:function(){e({type:"cart/addCart",payload:{product_id:t.id,quantity:t.installments>0?1:0,product:t,size:a}}),0===t.installments?O.b.error("\u5e93\u5b58\u4e0d\u8db3"):O.b.success("\u6dfb\u52a0\u6210\u529f")},block:!0,children:a})})}}),title:"\u9009\u62e9\u4f60\u7684\u5c3a\u7801",trigger:"click",children:Object(n.jsx)("button",{disabled:0===t.installments,className:"contentBtn",children:"Add to Car"})})]})},a)}));return Object(n.jsx)(l.a,{type:"flex",justify:"space-around",style:{margin:"20px 45px 0"},children:u?Object(n.jsx)("div",{className:"loading",children:Object(n.jsx)(N.a,{size:"large"})}):b})}));var I=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(g,{}),Object(n.jsx)(f,{}),Object(n.jsx)(z,{})]})},D=a(47),q=a(56),J={namespace:"cart",state:{data:[]},effects:{addCart:o.a.mark((function t(e,a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.payload,r=a.put,t.next=4,r({type:"products/addCart",payload:n});case 4:return t.next=6,r({type:"saveItem",payload:n});case 6:case"end":return t.stop()}}),t)})),setStorage:o.a.mark((function t(e,a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.payload,n=a.put,t.next=4,n({type:"storageData",cdata:{_data:JSON.parse(window.localStorage.data)}});case 4:case"end":return t.stop()}}),t)})),settlementData:o.a.mark((function t(e,a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.payload,n=a.put,t.next=4,n({type:"settlement"});case 4:case"end":return t.stop()}}),t)})),decreaseNum:o.a.mark((function t(e,a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.payload,r=a.put,t.next=4,r({type:"cutOne",payload:n});case 4:return t.next=6,r({type:"products/addOne",payload:n});case 6:case"end":return t.stop()}}),t)})),increaseNum:o.a.mark((function t(e,a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.payload,r=a.put,t.next=4,r({type:"increment",payload:n});case 4:case"end":return t.stop()}}),t)})),removeCart:o.a.mark((function t(e,a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.payload,r=a.put,t.next=4,r({type:"removeGood",payload:n});case 4:case"end":return t.stop()}}),t)}))},reducers:{saveItem:function(t,e){var a=e.payload,n=t.data,r=[],c=n.find((function(t){return t.product_id===a.product_id&&t.size===a.size}));c?(c.quantity+=a.quantity,r=n.map((function(t){return t.product_id===c.product_id&&t.size===c.size?c:t}))):r=[].concat(Object(q.a)(n),[a]);var s=window.localStorage,i=JSON.stringify(n);return s.setItem("data",i),{data:r}},removeGood:function(t,e){var a=e.payload,n=t.data;n[a.index].product.installments+=a.quantity,n.splice(a.index,1),console.log(n);var r=window.localStorage,c=JSON.stringify(n);return r.setItem("data",c),Object(D.a)(Object(D.a)({},t),{},{data:Object(q.a)(n)})},increment:function(t,e){var a=e.payload,n=t.data,r=n.findIndex((function(t){return t.id===a.id&&t.size===a.size}));0===n[r].product.installments?O.b.error("\u5e93\u5b58\u4e0d\u8db3"):(n[r].quantity+=a.key,n[r].product.installments-=a.key);var c=window.localStorage,s=JSON.stringify(n);return c.setItem("data",s),{data:Object(q.a)(n)}},storageData:function(t,e){return{data:e.cdata._data}},settlement:function(t,e){var a=e.data,n=window.localStorage,r=JSON.stringify(a);return n.setItem("data",r),Object(D.a)(Object(D.a)({},t),{},{data:a._data})},checkout:function(t){var e=t.data;e.splice(0,e.length);var a=window.localStorage,n=JSON.stringify(e);return a.setItem("data",n),{data:Object(q.a)(e)}},cutOne:function(t,e){var a=e.payload,n=t.data,r=n.findIndex((function(t){return t.id===a.id&&t.size===a.size}));1===n[r].quantity?O.b.error("\u5e93\u5b58\u53ea\u6709\u4e00\u4ef6\u5566\uff0c\u4e0d\u80fd\u518d\u51cf\u4e86"):(n[r].quantity+=a.key,n[r].product.installments-=a.key,console.log(n[r].product.installments));var c=window.localStorage,s=JSON.stringify(n);return c.setItem("data",s),{data:Object(q.a)(n)}}}},_=(a(421),a(243)),L=a.n(_),E=function(){var t=Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.a.get("https://www.fastmock.site/mock/b3fb1711049eb284f006b4d4f1e2664b/shop/api/shop").then((function(t){return console.log(t.data),t.data}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),F={namespace:"products",state:{data:[],shopData:[]},effects:{fetch:o.a.mark((function t(e,a){var n,r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.payload,n=a.call,r=a.put,t.next=4,n(E);case 4:if(!(c=t.sent)){t.next=12;break}return t.next=8,r({type:"saveData",payload:{res:c}});case 8:return t.next=10,r({type:"saveShopdata",payload:{res:c}});case 10:t.next=13;break;case 12:O.b.error("\u672a\u627e\u5230\u6570\u636e");case 13:case"end":return t.stop()}}),t)})),sortDatas:o.a.mark((function t(e,a){var n,r,c,s,i,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.payload,r=n.product,c=n.key,s=n.bol,i=a.put,d=[],!s){t.next=7;break}c&&r.forEach((function(t){for(var e=0;e<t.availableSizes.length;e++)t.availableSizes[e]===c&&d.push(t)})),t.next=21;break;case 7:if("asc"!==c){t.next=11;break}d=r.sort((function(t,e){return t.price-e.price})),t.next=21;break;case 11:if("desc"!==c){t.next=15;break}d=r.sort((function(t,e){return e.price-t.price})),t.next=21;break;case 15:if("default"!==c){t.next=19;break}d=r.sort((function(t,e){return e.id-t.id})),t.next=21;break;case 19:return t.next=21,i({type:"fetch"});case 21:return t.next=23,i({type:"setData",data:Object(q.a)(d)});case 23:case"end":return t.stop()}}),t)}))},reducers:{saveData:function(t,e){var a=e.payload.res;return Object(D.a)(Object(D.a)({},t),{},{data:a})},saveShopdata:function(t,e){var a=e.payload.res;return Object(D.a)(Object(D.a)({},t),{},{shopData:a})},addOne:function(t,e){var a=e.payload,n=t.data,r=JSON.parse(JSON.stringify(n));return r.map((function(t){(t.id=a.product_id)&&++t.installments})),{data:r}},addCart:function(t,e){var a=e.payload;return{data:t.data.map((function(t){return t.id===a.product_id&&t.installments>0?(t.installments--,t):t}))}},setData:function(t,e){return Object(D.a)(Object(D.a)({},t),{},{data:Object(q.a)(e.data)})}}},A=a(244),X=c()({history:Object(A.a)()});X.router((function(){return Object(n.jsx)(I,{})})),X.model(F),X.model(J),X.start("#root")}},[[439,1,2]]]);
//# sourceMappingURL=main.bc413005.chunk.js.map